(function(e){function t(t){for(var s,o,l=t[0],r=t[1],u=t[2],d=0,p=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);c&&c(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,l=1;l<i.length;l++){var r=i[l];0!==n[r]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var s={},n={app:0},a=[];function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=s,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=r;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"0325":function(e,t,i){"use strict";var s=i("de17"),n=i.n(s);n.a},"0b03":function(e,t,i){},"1b9b":function(e,t,i){},"23b6":function(e,t,i){},"24a8":function(e,t,i){"use strict";var s=i("fed0"),n=i.n(s);n.a},"2e9a":function(e,t,i){"use strict";var s=i("1b9b"),n=i.n(s);n.a},3970:function(e,t,i){"use strict";var s=i("23b6"),n=i.n(s);n.a},"5c0b":function(e,t,i){"use strict";var s=i("9c0c"),n=i.n(s);n.a},6664:function(e,t,i){},"6d1a":function(e,t,i){"use strict";var s=i("c80b"),n=i.n(s);n.a},"821c":function(e,t,i){"use strict";var s=i("0b03"),n=i.n(s);n.a},8954:function(e,t,i){},"8caa":function(e,t,i){},"9a1f":function(e,t,i){"use strict";var s=i("f27d"),n=i.n(s);n.a},"9c0c":function(e,t,i){},a482:function(e,t,i){},ae0b:function(e,t,i){"use strict";var s=i("a482"),n=i.n(s);n.a},c679:function(e,t,i){"use strict";var s=i("8caa"),n=i.n(s);n.a},c80b:function(e,t,i){},cd49:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},["fillin"===this.$route.name?i("div",[i("router-view")],1):i("div",{staticStyle:{height:"100%"}},[i("el-backtop"),i("el-container",[i("el-header",[i("Header")],1),i("el-main",[i("router-view")],1),i("el-footer",[i("Footer")],1)],1)],1)])},a=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{staticClass:"header-row",attrs:{type:"flex",justify:"center",align:"middle"}},[i("el-col",{attrs:{span:21}},[i("el-menu",{attrs:{mode:"horizontal","default-active":e.$route.path,router:""}},[i("el-menu-item",{staticClass:"el-menu-item",attrs:{index:"/collection"}},[e._v("我的问卷")]),i("el-menu-item",{staticClass:"el-menu-item",attrs:{index:"/create"},on:{click:e.gotoCreate}},[e._v("创建问卷")]),i("el-menu-item",{staticClass:"el-menu-item",attrs:{index:"/help"}},[e._v("帮助中心")])],1)],1),i("el-col",{attrs:{span:3}},[this.$store.state.login?e._e():i("el-avatar",{staticStyle:{cursor:"pointer"},nativeOn:{click:function(t){return e.gotoLogin(t)}}},[e._v("登录")]),this.$store.state.login?i("el-dropdown",{staticClass:"user-profile"},[i("el-avatar",[i("b",[e._v(e._s(this.$store.state.username.substr(0,1)))])]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{staticClass:"share-copy-link",attrs:{icon:"el-icon-share","data-clipboard-text":this.servername,"data-clipboard-action":"copy"},on:{click:e.copyShare}},[e._v("分享")]),i("el-dropdown-item",{attrs:{icon:"el-icon-close"},nativeOn:{click:function(t){return e.logout(t)}}},[e._v(" 退出登录")])],1)],1):e._e()],1)],1)},l=[],r=(i("ac1f"),i("5319"),i("b311")),u=i.n(r),c={name:"Header",methods:{gotoCreate:function(){var e=this;this.axios.get("/api/createQuestionnaire").then((function(t){e.$router.push("/create/"+t.data["id"])}))},copyShare:function(){var e=this,t=new u.a(".share-copy-link");t.on("success",(function(i){console.log("复制成功"),e.$message({message:"复制成功",duration:1e3}),t.destroy()})),t.on("error",(function(e){console.log("该浏览器不支持自动复制"),t.destroy()}))},logout:function(){var e=this;this.axios.post("/api/logout").then((function(){e.$store.commit("logout"),e.$router.replace("/login")}))},gotoLogin:function(){this.$router.replace("/login")}}},d=c,p=(i("ae0b"),i("2877")),m=Object(p["a"])(d,o,l,!1,null,"4a8603ee",null),h=m.exports,f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"footer-inner"},[e._v(" @copyright k. ")])},v=[],b={name:"Footer"},g=b,y=(i("24a8"),Object(p["a"])(g,f,v,!1,null,"900bc6d0",null)),_=y.exports,q={components:{Footer:_,Header:h}},x=q,w=(i("5c0b"),Object(p["a"])(x,n,a,!1,null,null,null)),k=w.exports,C=i("bc3a"),V=i.n(C),T=i("a7fe"),O=i.n(T),$=i("5c96"),L=i.n($),S=(i("0fae"),i("9483"));Object(S["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var D=i("8c4f"),N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{staticClass:"row-head",attrs:{type:"flex",justify:"start"}},[i("el-col",{attrs:{align:"start"}},[i("el-button",{staticClass:"create-button",attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.gotoCreate}},[e._v("创建问卷 ")])],1),i("el-col",{staticClass:"hidden-xs-only",attrs:{align:"end"}},[i("TypeChooseBox",{on:{changeShow:e.changeShow}})],1)],1),i("el-divider"),i("div",{staticClass:"questionnaire-card-ground"},[i("el-row",{attrs:{gutter:10}},e._l(e.questionnaireList,(function(t){return i("el-col",{key:t.questionnaireId,attrs:{xs:12,sm:6,md:6,lg:3,xl:2}},[-1!==e.checkedList.indexOf(t.status)?i("QuestionnaireCard",{staticClass:"questionnaire-card",attrs:{title:t.title,status:t.status,"create-time":t.createTime,"end-time":t.endTime,id:t.questionnaireId,description:t.description,"fill-count":t.fillCount},on:{deleteQuestionnaire:e.fetchData}}):e._e()],1)})),1)],1)],1)},Q=[],I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{attrs:{shadow:"hover"},nativeOn:{click:function(t){e.dialogOutlineDataVisible=!0}}},[i("div",{staticClass:"card-inner"},[i("div",{staticClass:"card-title"},[e._v(" "+e._s(e.title)+" ")]),i("div",{staticClass:"card-state"},[e._v(" "+e._s(e.translateLabel[e.status])+" ")]),i("div",{staticClass:"card-time"},[e._v(" "+e._s(e.createTime)+" ")])])]),i("el-dialog",{attrs:{title:e.title,visible:e.dialogOutlineDataVisible},on:{"update:visible":function(t){e.dialogOutlineDataVisible=t}}},[i("div",[e._v(" 问卷链接为： "),i("el-link",{staticClass:"copy-link",attrs:{target:"_blank","data-clipboard-text":this.servername+"/fillin/"+this.id,"data-clipboard-action":"copy",type:"primary"},on:{click:e.copy}},[e._v(" "+e._s(this.title)+"-点击复制 ")])],1),i("div",{staticClass:"description-box"},[i("div",[i("b",[e._v("问卷描述：")]),e._v(e._s(e.description)+" ")]),i("div",[i("b",[e._v("问卷状态：")]),e._v(e._s(e.translateLabel[e.status])+" ")]),i("div",[i("b",[e._v("填写人数：")]),e._v(e._s(e.fillCount)+" ")]),i("div",[i("b",[e._v("发布时间：")]),e._v(e._s(e.createTime)+" ")]),i("div",[i("b",[e._v("截止时间：")]),e._v(e._s(e.endTime)+" ")])]),i("el-dialog",{attrs:{width:"30%",title:"确认删除？",visible:e.deleteVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.deleteVisible=t}}},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.deleteVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"danger"},on:{click:e.deleteQuestionnaire}},[e._v("确认删除")])],1)]),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){e.deleteVisible=!0}}},[e._v("删 除")]),"collecting"===e.status?i("el-button",{attrs:{icon:"el-icon-close"},on:{click:e.closeForm}},[e._v("关 停")]):e._e(),"collecting"===e.status||"closed"===e.status?i("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.gotoFillIn}},[e._v("预 览 ")]):e._e(),"collecting"===e.status||"closed"===e.status?i("el-button",{attrs:{type:"primary",icon:"el-icon-s-data"},on:{click:e.gotoAnalysis}},[e._v("分 析 ")]):e._e(),"editing"===e.status?i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.gotoEdit}},[e._v("编 辑")]):e._e()],1)],1)},B=[],F=(i("a9e3"),{name:"questionnaire-card",props:{id:Number,title:String,status:String,createTime:String,endTime:String,fillCount:Number,description:String},methods:{gotoAnalysis:function(){var e=this.$router.push("/analysis/"+this.id);e||console.log("analysis error")},gotoEdit:function(){var e=this.$router.push("/create/"+this.id);e||console.log("analysis error")},deleteQuestionnaire:function(){var e=this;this.deleteVisible=!1,this.dialogOutlineDataVisible=!1,this.axios.get("/api/deleteQuestionnaire",{params:{questionnaireId:this.id}}).then((function(t){console.log(t),e.$emit("deleteQuestionnaire")}))},copy:function(){var e=this,t=new u.a(".copy-link");t.on("success",(function(i){console.log("复制成功"),e.$message({message:"复制成功",duration:1e3}),t.destroy()})),t.on("error",(function(e){console.log("该浏览器不支持自动复制"),t.destroy()}))},gotoFillIn:function(){var e=this.$router.resolve("/fillin/"+this.id);window.open(e.href,"_blank")},closeForm:function(){var e=this;this.axios.post("/api/closeQuestionnaire?questionnaireId="+this.id).then((function(){e.$message({message:"已成功关闭",duration:1e3})})).catch((function(){e.$message.error({message:"error！关闭失败！",duration:1e3})}))}},data:function(){return{dialogOutlineDataVisible:!1,deleteVisible:!1,translateLabel:{collecting:"收集中",editing:"编辑中",closed:"已关闭"}}}}),j=F,A=(i("3970"),Object(p["a"])(j,I,B,!1,null,"69f00b5c",null)),M=A.exports,E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选 ")]),i("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.checkOptions,(function(t){return i("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(e.translateLabel[t]))])})),1)],1)},z=[],P=["collecting","editing","closed"],H={data:function(){return{checkAll:!1,checkedList:["collecting","editing","closed"],translateLabel:{collecting:"收集中",editing:"编辑中",closed:"已关闭"},checkOptions:P,isIndeterminate:!0}},methods:{handleCheckAllChange:function(e){this.checkedList=e?P:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.checkOptions.length,this.isIndeterminate=t>0&&t<this.checkOptions.length}},updated:function(){console.log(this.checkedList),this.$emit("changeShow",this.checkedList)}},G=H,U=Object(p["a"])(G,E,z,!1,null,"4bba0d62",null),R=U.exports,J={name:"Collection",components:{QuestionnaireCard:M,TypeChooseBox:R},methods:{fetchData:function(){var e=this;this.axios.get("/api/getQuestionnaires").then((function(t){e.questionnaireList=t.data["questionnaires"]})).catch((function(){e.$message({message:"error!问卷读取失败！",duration:1e3})}))},gotoCreate:function(){var e=this;this.axios.get("/api/createQuestionnaire").then((function(t){e.$router.push("/create/"+t.data["id"])}))},changeShow:function(e){this.checkedList=e}},mounted:function(){this.fetchData()},data:function(){return{questionnaireList:[],checkedList:["collecting","editing","closed"]}}},W=J,K=(i("0325"),Object(p["a"])(W,N,Q,!1,null,"d3c92a6c",null)),X=K.exports,Y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"create-page"},[i("el-row",{staticClass:"create-page-main-row"},[i("el-col",{staticClass:"create-page-select-bar-wrapper hidden-xs-only",attrs:{sm:8,md:6,lg:4,xl:4}},[i("div",{staticClass:"placeholder"}),i("SelectBar",{staticClass:"create-page-select-bar",on:{addNewQuestion:e.addNewQuestion}})],1),i("el-col",{staticClass:"create-page-question-list",attrs:{sm:16,md:16,lg:20,xl:20}},[i("MainQuestionList",{ref:"mainQuestionList"})],1)],1)],1)},Z=[],ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"select-menu"},[i("el-row",[i("el-col",{staticClass:"select-item",nativeOn:{click:function(t){return e.addNewQuestion("single_check")}}},[i("i",{staticClass:"el-icon-circle-check"}),i("p",[e._v("单选")])]),i("el-col",{staticClass:"select-item",nativeOn:{click:function(t){return e.addNewQuestion("multi_check")}}},[i("i",{staticClass:"el-icon-edit-outline"}),i("p",[e._v("多选")])]),i("el-col",{staticClass:"select-item",nativeOn:{click:function(t){return e.addNewQuestion("single_line_text")}}},[i("i",{staticClass:"el-icon-document-remove"}),i("p",[e._v("单行文本")])]),i("el-col",{staticClass:"select-item",nativeOn:{click:function(t){return e.addNewQuestion("multi_line_text")}}},[i("i",{staticClass:"el-icon-document"}),i("p",[e._v("多行文本")])]),i("el-col",{staticClass:"select-item",nativeOn:{click:function(t){return e.addNewQuestion("number")}}},[i("i",{staticClass:"el-icon-s-data"}),i("p",[e._v("数字")])]),i("el-col",{staticClass:"select-item",nativeOn:{click:function(t){return e.addNewQuestion("grade")}}},[i("i",{staticClass:"el-icon-star-off"}),i("p",[e._v("评分")])]),i("el-col",{staticClass:"select-item",nativeOn:{click:function(t){return e.addNewQuestion("date")}}},[i("i",{staticClass:"el-icon-date"}),i("p",[e._v("日期")])]),i("el-col",{staticClass:"select-item",nativeOn:{click:function(t){return e.addNewQuestion("text_description")}}},[i("i",{staticClass:"el-icon-warning-outline"}),i("p",[e._v("文本描述")])])],1)],1)},te=[],ie={name:"SelectBar",methods:{addNewQuestion:function(e){this.$emit("addNewQuestion",e)}}},se=ie,ne=(i("6d1a"),Object(p["a"])(se,ee,te,!1,null,"3e0ba689",null)),ae=ne.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"main-question-list"},[i("div",{staticStyle:{padding:"0",display:"inline"}},[i("el-card",{staticStyle:{position:"relative"}},[i("div",{staticClass:"box-is-not-selected-wrapper",on:{click:e.editTitle}},[!1===e.questionnaire.isBoxSelected?i("div",{staticClass:"box-is-not-selected"},[i("h1",[e._v(e._s(e.questionnaire.questionnaireTitle))]),i("h3",[e._v(e._s(e.questionnaire.questionnaireDescription))])]):e._e(),i("div",{staticClass:"edit-icon"},[i("i",{staticClass:"el-icon-edit-outline"})])]),!0===e.questionnaire.isBoxSelected?i("div",[i("el-form",[i("el-form-item",[i("el-input",{staticStyle:{"max-width":"50%"},attrs:{type:"text",placeholder:"请输入问卷标题"},model:{value:e.questionnaire.questionnaireTitle,callback:function(t){e.$set(e.questionnaire,"questionnaireTitle",t)},expression:"questionnaire.questionnaireTitle"}})],1),i("el-form-item",[i("el-input",{staticStyle:{"max-width":"70%"},attrs:{type:"textarea",placeholder:"请输入问卷描述"},model:{value:e.questionnaire.questionnaireDescription,callback:function(t){e.$set(e.questionnaire,"questionnaireDescription",t)},expression:"questionnaire.questionnaireDescription"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.saveQuestionnaireTitle}},[e._v("保存")]),i("el-button",{on:{click:e.resetQuestionnaireTitle}},[e._v("重置")])],1)],1)],1):e._e()])],1),i("div",{staticStyle:{height:"10px"}}),e._l(e.questionList,(function(t,s){return i("Question",{key:s,attrs:{"is-box-selected":t.isBoxSelected,"question-index":s,"question-title":t.questionTitle,"question-nullable":t.questionNullable,"question-description":t.questionDescription,"question-type":t.questionType,"front-choose":t.frontChoose,"front-options-init-value":t.frontOptions,"front-options":e.frontOptions(s),date:t.date,"default-number":t.defaultNumber,"grade-max":t.gradeMax,"number-type":t.numberType,"question-options":t.questionOptions,"text-description":t.textDescription},on:{clickUnSelected:function(t){return e.selectOneBox(s)},clickSelected:function(t){return e.selectOneBox(s)},saveOneQuestion:e.saveOneQuestion,resetQuestion:function(t){return e.resetQuestion(s)},clickDelete:function(t){return e.deleteOneBox(s)}}})})),i("el-card",{staticClass:"add-question",attrs:{"body-style":{padding:"10px"},shadow:"hover"}},[i("div",{staticClass:"add-question-inner",on:{click:function(t){return e.addNewQuestion("not_selected")}}},[i("i",{staticClass:"el-icon-plus"}),e._v(" 添加问题 ")])]),i("el-card",[i("el-dialog",{attrs:{width:"30%",title:"确认删除？",visible:e.deleteVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.deleteVisible=t}}},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.deleteVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"danger"},on:{click:e.deleteQuestionnaire}},[e._v("确认删除")])],1)]),i("el-dialog",{attrs:{width:"30%",title:"发布成功",visible:e.releaseVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.releaseVisible=t}}},[e._v(" 问卷链接为： "),i("el-link",{staticClass:"copy-link",attrs:{target:"_blank","data-clipboard-text":this.servername+"/fillin/"+this.$route.params.id,"data-clipboard-action":"copy",type:"primary"},on:{click:e.copy}},[e._v(" "+e._s(this.questionnaire.questionnaireTitle)+"-点击复制 ")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.releaseEnd}},[e._v("关 闭")])],1)],1),i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.deleteVisible=!0}}},[e._v("删 除")]),i("el-button",{on:{click:e.saveQuestionnaire}},[e._v("保 存")]),i("el-button",{attrs:{type:"primary"},on:{click:e.releaseQuestionnaire}},[e._v("发 布")])],1)],2)])},le=[],re=(i("a4d3"),i("e01a"),i("d81d"),i("a434"),i("b85c")),ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{position:"relative"}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"hover","body-style":{padding:"0"}}},[e.isBoxSelected?e._e():i("div",{staticClass:"box-is-not-selected-wrapper",on:{click:e.clickUnSelected}},[i("div",{staticClass:"box-is-not-selected"},[i("div",{staticClass:"question-title-div"},[i("div",{staticStyle:{display:"inline"}},[e._v(e._s(e.questionIndex+1)+". "+e._s(e.questionTitleValue))]),!1===e.questionNullableValue?i("div",{staticClass:"nullable-star",staticStyle:{display:"inline"}},[e._v("*")]):e._e()]),i("div",{staticClass:"description-div"},[e._v(e._s(e.questionDescriptionValue))]),"single_check"===e.typeValue?i("el-radio-group",{model:{value:e.optionsValue,callback:function(t){e.optionsValue=t},expression:"optionsValue"}},e._l(e.optionsValue,(function(t,s){return i("el-radio",{key:s},[e._v(e._s(t))])})),1):"multi_check"===e.typeValue?i("el-checkbox-group",{model:{value:e.optionsValue,callback:function(t){e.optionsValue=t},expression:"optionsValue"}},e._l(e.optionsValue,(function(t,s){return i("el-checkbox",{key:s},[e._v(e._s(t))])})),1):"single_line_text"===e.typeValue?i("el-input",{staticStyle:{"max-width":"80%"},attrs:{type:"text",placeholder:"请输入内容（单行文本）"}}):"multi_line_text"===e.typeValue?i("el-input",{staticStyle:{"max-width":"80%"},attrs:{type:"textarea",placeholder:"请输入内容（多行文本）"}}):"number"===e.typeValue?i("el-input",{staticStyle:{"max-width":"200px"},attrs:{type:"number",placeholder:"请输入数字",step:"1"}}):"grade"===e.typeValue?i("el-rate",{attrs:{max:e.gradeMaxValue}}):"date"===e.typeValue?i("el-date-picker",{model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):"text_description"===e.typeValue?i("div",{staticClass:"description-div"},[e._v(" "+e._s(e.textDescriptionValue)+" ")]):e._e(),e.frontChoose?i("div",[i("el-divider"),e._l(e.frontOptionsValue,(function(t,s){return i("div",{key:s},[e._v(" 前置选项"+e._s(s+1)+"： "),i("el-cascader",{attrs:{value:t,options:e.frontOptions,disabled:!0}})],1)}))],2):e._e()],1),i("div",{staticClass:"edit-icon"},[i("i",{staticClass:"el-icon-edit-outline"})])]),e.isBoxSelected?i("div",{staticClass:"box-is-selected"},[i("div",{staticClass:"question-index"},[e._v(e._s(e.questionIndex+1)+". ")]),i("el-form",[i("el-form-item",{attrs:{label:"标题："}},[i("el-input",{staticStyle:{"max-width":"60%"},attrs:{type:"text",size:"medium",placeholder:"请输入标题"},model:{value:e.questionTitleValue,callback:function(t){e.questionTitleValue=t},expression:"questionTitleValue"}})],1),i("el-form-item",{attrs:{label:"描述："}},[i("el-input",{staticClass:"description-div",attrs:{type:"text",size:"medium",placeholder:"请输入描述"},model:{value:e.questionDescriptionValue,callback:function(t){e.questionDescriptionValue=t},expression:"questionDescriptionValue"}})],1),i("el-form-item",{attrs:{label:"类型："}},[i("el-select",{attrs:{placeholder:"请选择",size:"medium"},model:{value:e.typeValue,callback:function(t){e.typeValue=t},expression:"typeValue"}},e._l(e.typeOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"是否选填："}},[i("el-select",{attrs:{placeholder:"是否可以不填写"},model:{value:e.questionNullableValue,callback:function(t){e.questionNullableValue=t},expression:"questionNullableValue"}},[i("el-option",{attrs:{value:!0,label:"是"}}),i("el-option",{attrs:{value:!1,label:"否"}})],1)],1),i("el-form-item",{attrs:{label:"是否前置："}},[i("el-tooltip",{attrs:{placement:"top",effect:"light",content:"是否启用级联选择（在用户选择了前置某些选项时出现）"}},[i("el-select",{attrs:{placeholder:"本题在用户选择了前置某些选项时出现"},model:{value:e.frontChooseValue,callback:function(t){e.frontChooseValue=t},expression:"frontChooseValue"}},[i("el-option",{attrs:{value:!0,label:"是"}}),i("el-option",{attrs:{value:!1,label:"否"}})],1)],1)],1),!0===e.frontChooseValue?i("div",e._l(e.frontOptionsValue,(function(t,s){return i("el-form-item",{key:s,attrs:{label:"前置选项"+(s+1)+"："}},[i("div",{staticClass:"block"},[i("el-cascader",{attrs:{options:e.frontOptions,props:{expandTrigger:"hover"}},model:{value:e.frontOptionsValue[s],callback:function(t){e.$set(e.frontOptionsValue,s,t)},expression:"frontOptionsValue[index]"}})],1),i("el-tooltip",{attrs:{effect:"light",content:"在下方添加","open-delay":200,"hide-after":1500,placement:"top"}},[i("el-button",{staticClass:"add-option-button",attrs:{size:"medium",round:""},on:{click:e.addFrontOption}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-tooltip",{attrs:{effect:"light",content:"删除本选项","open-delay":200,"hide-after":1500,placement:"top"}},[i("el-button",{staticClass:"delete-option-button",attrs:{size:"medium",round:""},on:{click:function(t){return e.deleteFrontOption(s)}}},[i("i",{staticClass:"el-icon-delete"})])],1)],1)})),1):e._e(),i("el-divider",{staticClass:"divider"}),"single_check"===e.typeValue||"multi_check"===e.typeValue?i("div",e._l(e.optionsValue,(function(t,s){return i("el-form-item",{key:s},[e._v(" 选项"+e._s(s+1)+"： "),i("el-input",{staticStyle:{"max-width":"200px"},model:{value:e.optionsValue[s],callback:function(t){e.$set(e.optionsValue,s,t)},expression:"optionsValue[index]"}}),i("el-tooltip",{attrs:{effect:"light",content:"在下方添加","open-delay":200,"hide-after":1500,placement:"top"}},[i("el-button",{staticClass:"add-option-button",attrs:{size:"medium",round:""},on:{click:e.addOption}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-tooltip",{attrs:{effect:"light",content:"删除本选项","open-delay":200,"hide-after":1500,placement:"top"}},[i("el-button",{staticClass:"delete-option-button",attrs:{size:"medium",round:""},on:{click:function(t){return e.deleteOption(s)}}},[i("i",{staticClass:"el-icon-delete"})])],1)],1)})),1):e._e(),"number"===e.typeValue?i("div",[i("el-form-item",{attrs:{label:"数字类型："}},[i("el-select",{attrs:{placeholder:"请选择数字类型",size:"medium"},model:{value:e.numberTypeValue,callback:function(t){e.numberTypeValue=t},expression:"numberTypeValue"}},e._l(e.numberTypeOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"默认数值："}},[i("el-input-number",{model:{value:e.defaultNumberValue,callback:function(t){e.defaultNumberValue=t},expression:"defaultNumberValue"}})],1)],1):e._e(),"grade"===e.typeValue?i("div",[i("el-form-item",[e._v(" 最大分数 "),i("el-input-number",{model:{value:e.gradeMaxValue,callback:function(t){e.gradeMaxValue=t},expression:"gradeMaxValue"}})],1)],1):e._e(),"text_description"===e.typeValue?i("div",[i("el-form-item",{attrs:{label:"内容："}},[i("el-input",{staticStyle:{"max-width":"400px"},attrs:{type:"textarea",size:"medium"},model:{value:e.textDescriptionValue,callback:function(t){e.textDescriptionValue=t},expression:"textDescriptionValue"}})],1)],1):e._e(),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.saveOneQuestion}},[e._v("保存")]),i("el-button",{on:{click:e.resetQuestion}},[e._v("重置")])],1)],1)],1):e._e(),i("el-button",{staticClass:"delete-button",attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.clickDelete}})],1)],1)},ce=[],de={name:"Question",props:{isBoxSelected:Boolean,questionIndex:Number,questionTitle:String,questionNullable:Boolean,questionType:String,questionDescription:String,questionOptions:Array,frontChoose:Boolean,frontOptions:Array,frontOptionsInitValue:Array,numberType:String,defaultNumber:Number,gradeMax:Number,date:Date,textDescription:String},methods:{clickUnSelected:function(){this.$emit("clickUnSelected")},saveOneQuestion:function(){this.$emit("saveOneQuestion",this.questionData),this.$emit("clickSelected")},resetQuestion:function(){this.$emit("resetQuestion"),this.questionTitleValue="请输入标题",this.questionNullableValue=!1,this.questionDescriptionValue="请输入描述",this.typeValue="not_selected",this.optionsValue=[],this.frontOptionsValue=[[]],this.frontChooseValue=!1,this.numberTypeValue="integer",this.defaultNumberValue=0,this.gradeMaxValue=5,this.dateValue=new Date,this.textDescriptionValue=""},clickDelete:function(){this.$emit("clickDelete")},addOption:function(){this.optionsValue.push("")},deleteOption:function(e){this.optionsValue.splice(e,1)},addFrontOption:function(){this.frontOptionsValue.push([])},deleteFrontOption:function(e){this.frontOptionsValue.splice(e,1)}},data:function(){return{typeOptions:[{value:"not_selected",label:"请输入"},{value:"single_check",label:"单选"},{value:"multi_check",label:"多选"},{value:"single_line_text",label:"单行文本"},{value:"multi_line_text",label:"多行文本"},{value:"number",label:"数字"},{value:"grade",label:"评分"},{value:"date",label:"日期"},{value:"text_description",label:"文本描述"}],numberTypeOptions:[{value:"integer",label:"整数"},{value:"fraction",label:"小数"}],numberTypeValue:this.numberType,defaultNumberValue:this.defaultNumber,typeValue:this.questionType,optionsValue:this.questionOptions,questionDescriptionValue:this.questionDescription,questionTitleValue:this.questionTitle,gradeMaxValue:this.gradeMax,dateValue:this.date,textDescriptionValue:this.textDescription,frontChooseValue:this.frontChoose,frontOptionsValue:this.frontOptionsInitValue,questionNullableValue:this.questionNullable}},computed:{questionData:function(){var e={questionIndex:this.questionIndex,questionOptions:this.optionsValue,questionDescription:this.questionDescriptionValue,questionTitle:this.questionTitleValue,questionType:this.typeValue,frontChoose:this.frontChooseValue,frontOptions:this.frontOptionsValue,questionNullable:this.questionNullableValue,numberType:this.numberTypeValue,defaultNumber:this.defaultNumberValue,gradeMax:this.gradeMaxValue,date:this.dateValue,textDescription:this.textDescriptionValue};return e}}},pe=de,me=(i("e082"),Object(p["a"])(pe,ue,ce,!1,null,"7c06d1e2",null)),he=me.exports,fe={name:"MainQuestionList",components:{Question:he},data:function(){return{questionList:[],questionnaire:{isBoxSelected:!1,questionnaireDescription:"请输入描述",questionnaireTitle:"请输入标题",questionnaireId:this.$route.params.id},deleteVisible:!1,deleted:!1,releaseVisible:!1}},methods:{fetchData:function(){var e=this;this.axios.get("/api/getQuestionList",{params:{questionnaireId:this.$route.params.id}}).then((function(t){var i,s=t.data["questionList"],n=[],a=Object(re["a"])(s);try{for(a.s();!(i=a.n()).done;){var o=i.value;o["date"]=new Date(o["date"]),n.push(o)}}catch(l){a.e(l)}finally{a.f()}e.questionList=n,e.$message({message:"问卷已读取",duration:1e3})})).catch((function(){e.$message({message:"error！问卷读取失败！",duration:1e3})})),this.axios.get("/api/getQuestionnaireOutline",{params:{questionnaireId:this.$route.params.id}}).then((function(t){var i={isBoxSelected:!1,questionnaireDescription:t.data["questionnaire"]["description"],questionnaireTitle:t.data["questionnaire"]["title"],questionnaireId:t.data["questionnaire"]["questionnaireId"]};e.questionnaire=i})).catch((function(){e.$message({message:"error！问卷概况读取失败！",duration:1e3})}))},selectOneBox:function(e){this.questionList[e].isBoxSelected=!this.questionList[e].isBoxSelected},resetQuestion:function(e){},saveOneQuestion:function(e){var t=this,i=e["questionIndex"],s={questionIndex:i,isBoxSelected:!0,questionTitle:e["questionTitle"],questionNullable:e["questionNullable"],questionDescription:e["questionDescription"],questionType:e["questionType"],questionOptions:e["questionOptions"],frontOptions:e["frontOptions"],frontChoose:e["frontChoose"],numberType:e["numberType"],defaultNumber:e["defaultNumber"],gradeMax:e["gradeMax"],date:e["date"],textDescription:e["textDescription"]};this.questionList.splice(i,1,s),this.axios.post("/api/saveOneQuestion?questionnaireId="+this.$route.params.id,{question:s}).then((function(){t.$message({message:"问卷已保存",duration:1e3})})).catch((function(){t.$message({message:"error！问卷未保存！",duration:1e3})}))},deleteOneBox:function(e){this.questionList.splice(e,1)},addNewQuestion:function(e){var t={questionIndex:this.questionList.length,isBoxSelected:!0,questionTitle:"",questionNullable:!1,questionDescription:"",questionType:e,questionOptions:[""],frontOptions:[[]],frontChoose:!1,numberType:"integer",defaultNumber:0,gradeMax:5,date:new Date,textDescription:""};this.questionList.push(t),console.log("add",this.questionList)},saveQuestionnaireTitle:function(){var e=this;this.questionnaire.isBoxSelected=!1,this.axios.post("/api/saveQuestionnaireOutline",{questionnaire:this.questionnaire}).then((function(){e.$message({message:"问卷已保存",duration:1e3})})).catch((function(){e.$message({message:"error！问卷未保存！",duration:1e3})}))},resetQuestionnaireTitle:function(){this.questionnaire={isBoxSelected:!1,questionnaireDescription:"请输入描述",questionnaireTitle:"请输入标题",questionnaireId:this.$route.params.id}},editTitle:function(){this.questionnaire.isBoxSelected=!0},saveQuestionnaire:function(){var e=this;this.axios.post("/api/saveQuestionnaire",{questionnaire:this.questionnaire,questionList:this.questionList}).then((function(){e.$message({message:"问卷已保存",duration:1e3})})).catch((function(){e.$message({message:"error！问卷未保存！",duration:1e3})})),this.$router.back()},deleteQuestionnaire:function(){var e=this;this.deleteVisible=!1,this.axios.get("/api/deleteQuestionnaire",{params:{questionnaireId:this.questionnaire.questionnaireId}}).then((function(t){console.log(t),e.$router.back(),e.deleted=!0,e.$message({message:"问卷已删除",duration:1e3})}))},frontOptions:function(e){for(var t=[],i=0;i<e;i++){var s=this.questionList[i];if(null!=s){var n={label:s["questionTitle"],value:e,children:s["questionOptions"].map((function(e){return{value:e,label:e}}))};t.push(n)}}return t},releaseQuestionnaire:function(){var e=this;this.axios.post("/api/releaseQuestionnaire?questionnaireId="+this.$route.params.id).then((function(){e.$message({message:"问卷已发布",duration:1e3})})).catch((function(){e.$message({message:"error！问卷未发布！",duration:1e3})})),this.releaseVisible=!0},releaseEnd:function(){this.releaseVisible=!1,this.$router.back()},copy:function(){var e=this,t=new u.a(".copy-link");t.on("success",(function(i){console.log("复制成功"),e.$message({message:"复制成功",duration:1e3}),t.destroy()})),t.on("error",(function(e){console.log("该浏览器不支持自动复制"),t.destroy()}))}},created:function(){this.fetchData()}},ve=fe,be=(i("d94e"),Object(p["a"])(ve,oe,le,!1,null,"ef341206",null)),ge=be.exports,ye=(i("e05f"),{name:"Create",components:{MainQuestionList:ge,SelectBar:ae},methods:{addNewQuestion:function(e){this.$refs.mainQuestionList.addNewQuestion(e)}}}),_e=ye,qe=(i("9a1f"),Object(p["a"])(_e,Y,Z,!1,null,"f1cb5720",null)),xe=qe.exports,we=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ke=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("br"),i("h1",[e._v("帮助")]),i("br"),i("div",[e._v("再说吧")]),i("div",[e._v("看见啥点啥")]),i("div",[e._v("就能用了")]),i("br"),i("div",[e._v("点登录就登录")]),i("div",[e._v("点创建就创建")]),i("div",[e._v("点分析就分析")]),i("div",[e._v("点发布就发布")]),i("br"),i("div",[e._v("真好啊")])])}],Ce={name:"Help"},Ve=Ce,Te=Object(p["a"])(Ve,we,ke,!1,null,"5870d3a8",null),Oe=Te.exports,$e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"outlineData"},[i("MainAnalysisList")],1),i("el-divider"),i("div",{staticClass:"questionList"})],1)},Le=[],Se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"main-analysis-list"},[i("el-card",[i("h1",[e._v(e._s(e.questionnaire.title))]),i("div",{staticClass:"description-box"},[i("div",[i("b",[e._v("问卷描述：")]),e._v(e._s(e.questionnaire.description)+" ")]),i("div",[i("b",[e._v("问卷状态：")]),e._v(e._s(e.translateLabel[e.questionnaire.status])+" ")]),i("div",[i("b",[e._v("填写人数：")]),e._v(e._s(e.questionnaire.fillCount)+" ")]),i("div",[i("b",[e._v("发布时间：")]),e._v(e._s(e.questionnaire.createTime)+" ")]),i("div",[i("b",[e._v("截止时间：")]),e._v(e._s(e.questionnaire.endTime)+" ")])])]),e._l(e.questionList,(function(e,t){return i("AnalysisCard",{key:t,attrs:{"question-index":t+1,"question-id":e.questionId,"question-title":e.questionTitle,"question-type":e.questionType}})}))],2)])},De=[],Ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[i("div",{staticClass:"analysis-title"},[e._v(e._s(e.questionIndex)+". "+e._s(e.questionTitle))]),i("el-divider"),"date"===e.questionType||"single_line_text"===e.questionType||"multi_line_text"===e.questionType?i("div",[i("el-table",{staticStyle:{width:"80%",margin:"auto"},attrs:{data:e.writeValueList,height:"250",border:""}},[i("el-table-column",{attrs:{prop:"writeValue",label:"填写内容"}})],1)],1):e._e(),"single_check"===e.questionType||"multi_check"===e.questionType?i("div",[i("el-radio-group",{staticClass:"choose-show",model:{value:e.showBar,callback:function(t){e.showBar=t},expression:"showBar"}},[i("el-radio",{attrs:{label:!0}},[e._v("数量")]),i("el-radio",{attrs:{label:!1}},[e._v("占比")])],1),i("el-row",[i("el-col",{attrs:{xs:24,sm:18,md:18,lg:18,xl:18}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.showBar,expression:"showBar===true"}],staticClass:"bar-chart",style:{height:e.barHeight},attrs:{id:"barChart"+e.questionIndex}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.showBar,expression:"showBar===false"}],staticClass:"pie-chart",attrs:{id:"pieChart"+e.questionIndex}})]),i("el-col",{attrs:{xs:24,sm:6,md:6,lg:6,xl:6}},[i("el-table",{staticClass:"analysis-table",attrs:{data:e.questionValueList,"default-sort":{prop:"value",order:"descending"}}},[i("el-table-column",{attrs:{prop:"name",label:"选项"}}),i("el-table-column",{attrs:{prop:"value",label:"人数"}})],1)],1)],1)],1):e._e(),"number"===e.questionType||"grade"===e.questionType?i("div",[i("el-row",[i("el-col",{attrs:{xs:24,sm:18,md:18,lg:18,xl:18}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.showBar,expression:"showBar===true"}],staticClass:"bar-chart",style:{height:e.barHeight},attrs:{id:"barChart"+e.questionIndex}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.showBar,expression:"showBar===false"}],staticClass:"pie-chart",attrs:{id:"pieChart"+e.questionIndex}})]),i("el-col",{attrs:{xs:24,sm:6,md:6,lg:6,xl:6}},[i("el-table",{staticClass:"analysis-table",attrs:{data:e.questionValueList,"default-sort":{prop:"value",order:"descending"}}},[i("el-table-column",{attrs:{prop:"name",label:"内容"}}),i("el-table-column",{attrs:{prop:"value",label:"数值"}})],1)],1)],1)],1):e._e()],1)],1)},Qe=[],Ie=(i("b0c0"),i("3eba")),Be=i.n(Ie),Fe=(i("94b1"),i("c037"),i("007d"),{name:"AnalysisCard",props:{questionIndex:Number,questionId:Number,questionTitle:String,questionType:String},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;"single_check"===this.questionType||"multi_check"===this.questionType||"number"===this.questionType||"grade"===this.questionType?this.axios.get("/api/getQuestionValueList",{params:{questionId:this.questionId}}).then((function(t){var i=t["data"],s=[];for(var n in i)s.push({name:n,value:i[n]});s.sort((function(e,t){return e.value-t.value})),e.questionValueList=s,e.barHeight=33*e.questionValueList.length+150+"px",e.drawBar(),e.drawPie()})).catch((function(){e.$message({message:"error！读取失败！",duration:1e3})})):this.axios.get("/api/getWriteValue",{params:{questionId:this.questionId}}).then((function(t){e.writeValueList=t["data"]})).catch((function(){e.$message({message:"error！读取失败！",duration:1e3})}))},drawBar:function(){var e=Be.a.init(document.getElementById("barChart"+this.questionIndex),"light");e.setOption({tooltip:{},grid:{left:"15%"},xAxis:{},yAxis:{data:this.questionValueList.map((function(e){return e["name"]}))},series:[{name:"选择人数",type:"bar",data:this.questionValueList}]})},drawPie:function(){var e=Be.a.init(document.getElementById("pieChart"+this.questionIndex),"light");e.setOption({tooltip:{},grid:{left:20},series:[{name:"选择人数",type:"pie",data:this.questionValueList}]})}},data:function(){return{showBar:!0,writeValueList:null,questionValueList:[],barHeight:"250px"}}}),je=Fe,Ae=(i("c679"),Object(p["a"])(je,Ne,Qe,!1,null,"18c7e9ec",null)),Me=Ae.exports,Ee={name:"MainAnalysisList",components:{AnalysisCard:Me},methods:{fetchData:function(){var e=this;this.axios.get("/api/getQuestionList",{params:{questionnaireId:this.$route.params.id}}).then((function(t){e.questionList=t.data["questionList"],e.$message({message:"问卷已读取",duration:1e3})})).catch((function(){e.$message({message:"error！问卷读取失败！",duration:1e3})})),this.axios.get("/api/getQuestionnaireOutline",{params:{questionnaireId:this.$route.params.id}}).then((function(t){e.questionnaire=t.data["questionnaire"]})).catch((function(){e.$message({message:"error！问卷概况读取失败！",duration:1e3})}))}},mounted:function(){this.fetchData()},data:function(){return{questionnaire:{title:"",description:"描述",status:"已完成",createTime:null,endTime:null,fillCount:299},questionList:[],translateLabel:{collecting:"收集中",editing:"编辑中",closed:"已关闭"}}}},ze=Ee,Pe=(i("821c"),Object(p["a"])(ze,Se,De,!1,null,"9ff6a4a8",null)),He=Pe.exports,Ge={name:"Analysis",components:{MainAnalysisList:He}},Ue=Ge,Re=Object(p["a"])(Ue,$e,Le,!1,null,"de77e580",null),Je=Re.exports,We=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-col",{staticClass:"main-answer-list",attrs:{sm:24,md:{span:18,offset:3},lg:{span:16,offset:4},xl:{span:14,offset:5}}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[!1===e.questionnaire.isBoxSelected?i("div",[i("h1",[e._v(e._s(e.questionnaire.questionnaireTitle))]),i("h3",[e._v(e._s(e.questionnaire.questionnaireDescription))])]):e._e()]),i("el-form",{attrs:{disabled:e.cannotSubmit}},[e._l(e.questionList,(function(t,s){return i("div",{key:s},[e.ifShowByCheckingFront(s)?i("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[i("el-form-item",[i("div",{staticClass:"question-title-div"},[i("div",{staticStyle:{display:"inline"}},[i("b",[e._v(e._s(s+1)+". "+e._s(t.questionTitle))])]),!1===t.questionNullable?i("div",{staticClass:"nullable-star",staticStyle:{display:"inline"}},[e._v(" * ")]):e._e()]),i("div",{staticClass:"description-div"},[e._v(e._s(t.questionDescription))])]),i("el-form-item",["single_check"===t.questionType?i("el-radio-group",{model:{value:e.answerList[s].answerSingleCheck,callback:function(t){e.$set(e.answerList[s],"answerSingleCheck",t)},expression:"answerList[index].answerSingleCheck"}},e._l(t.questionOptions,(function(t,s){return i("el-radio",{key:s,attrs:{label:t}},[e._v(e._s(t)+" ")])})),1):"multi_check"===t.questionType?i("el-checkbox-group",{model:{value:e.answerList[s].answerMultiCheck,callback:function(t){e.$set(e.answerList[s],"answerMultiCheck",t)},expression:"answerList[index].answerMultiCheck"}},e._l(t.questionOptions,(function(t,s){return i("el-checkbox",{key:s,attrs:{label:t}},[e._v(e._s(t)+" ")])})),1):"single_line_text"===t.questionType?i("el-input",{staticStyle:{"max-width":"80%"},attrs:{type:"text",placeholder:"请输入内容（单行文本）"},model:{value:e.answerList[s].answerText,callback:function(t){e.$set(e.answerList[s],"answerText",t)},expression:"answerList[index].answerText"}}):"multi_line_text"===t.questionType?i("el-input",{staticStyle:{"max-width":"80%"},attrs:{type:"textarea",placeholder:"请输入内容（多行文本）"},model:{value:e.answerList[s].answerText,callback:function(t){e.$set(e.answerList[s],"answerText",t)},expression:"answerList[index].answerText"}}):"number"===t.questionType&&"integer"===t.numberType?i("el-input",{staticStyle:{"max-width":"200px"},attrs:{type:"number",placeholder:"请输入整数",step:"1",oninput:"this.value = this.value.replace(/[^0-9]/g, '');"},model:{value:e.answerList[s].answerNumber,callback:function(t){e.$set(e.answerList[s],"answerNumber",t)},expression:"answerList[index].answerNumber"}}):"number"===t.questionType&&"integer"!==t.numberType?i("el-input",{staticStyle:{"max-width":"200px"},attrs:{type:"number",placeholder:"请输入数字",step:"1"},model:{value:e.answerList[s].answerNumber,callback:function(t){e.$set(e.answerList[s],"answerNumber",t)},expression:"answerList[index].answerNumber"}}):"grade"===t.questionType?i("el-rate",{attrs:{max:t.gradeMax},model:{value:e.answerList[s].answerGrade,callback:function(t){e.$set(e.answerList[s],"answerGrade",t)},expression:"answerList[index].answerGrade"}}):"date"===t.questionType?i("el-date-picker",{model:{value:e.answerList[s].answerDate,callback:function(t){e.$set(e.answerList[s],"answerDate",t)},expression:"answerList[index].answerDate"}}):"text_description"===t.questionType?i("div",{staticClass:"description-div"},[e._v(" "+e._s(t.textDescriptionValue)+" ")]):e._e()],1)],1):e._e()],1)})),i("el-form-item",[i("el-card",{staticClass:"box-card",staticStyle:{width:"100%"}},[i("el-dialog",{attrs:{width:"70%",title:"确认提交？",visible:e.submitVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.submitVisible=t}}},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.submitVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitAnswer}},[e._v("确认提交")])],1)]),i("el-dialog",{attrs:{width:"70%",title:"确认重置？",visible:e.resetVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.resetVisible=t}}},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.resetVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.resetAnswer}},[e._v("确认重置")])],1)]),i("div",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitVisible=!0}}},[e._v("提 交")]),i("el-button",{on:{click:function(t){e.resetVisible=!0}}},[e._v("重 置")])],1)],1)],1)],2)],1)],1)},Ke=[],Xe=(i("c975"),{name:"FillIn",data:function(){return{questionList:[],answerList:[],questionnaire:{isBoxSelected:!1,questionnaireDescription:"Description",questionnaireTitle:"Title",questionnaireId:this.$route.params.id},submitVisible:!1,resetVisible:!1,ip:null,alreadySubmit:null,cannotSubmit:null}},computed:{aaa:function(){return{answerList:this.answerList}}},methods:{fetchData:function(){var e=this;this.axios.get("/api/fillin/getQuestionList",{params:{questionnaireId:this.$route.params.id}}).then((function(t){var i,s=t.data["questionList"],n=[],a=[],o=Object(re["a"])(s);try{for(o.s();!(i=o.n()).done;){var l=i.value;l["date"]=new Date(l["date"]),n.push(l);var r={questionId:l["questionId"],questionTitle:l["questionTitle"],questionType:l["questionType"],questionNullable:l["questionNullable"],answerSingleCheck:"",answerMultiCheck:[],answerText:"",answerNumber:l["defaultNumber"],answerGrade:0,answerDate:l["date"]};a.push(r)}}catch(u){o.e(u)}finally{o.f()}e.questionList=n,e.answerList=a,e.$message({message:"问卷已读取",duration:1e3})})).catch((function(){e.$message({message:"error！问卷读取失败！",duration:1e3})})),this.axios.get("/api/fillin/getQuestionnaireOutline",{params:{questionnaireId:this.$route.params.id}}).then((function(t){var i={isBoxSelected:!1,questionnaireDescription:t.data["questionnaire"]["description"],questionnaireTitle:t.data["questionnaire"]["title"],questionnaireId:t.data["questionnaire"]["questionnaireId"]};"closed"===t.data["questionnaire"]["status"]&&(e.$message.error({message:"error！问卷已关闭！",duration:0}),e.cannotSubmit=!0),e.questionnaire=i})).catch((function(){e.$message({message:"error!问卷概况读取失败！",duration:1e3})}))},submitAnswer:function(){var e=this;console.log(this.answerList),this.checkValidate()&&this.axios.post("/api/fillin/submitAnswer?questionnaireId="+this.$route.params.id,{answerList:this.answerList,ip:this.ip}).then((function(){e.submitVisible=!1,e.alreadySubmit=!0,e.cannotSubmit=!0,e.$message({message:"问卷已提交",duration:1e3})})).catch((function(){e.$message({message:"error！提交失败！",duration:1e3})}))},resetAnswer:function(){this.fetchData(),this.resetVisible=!1},ifShowByCheckingFront:function(e){var t=this.questionList[e];if(!1===t.frontChoose)return!0;var i,s=Object(re["a"])(t.frontOptions);try{for(s.s();!(i=s.n()).done;){var n=i.value,a=n[0]-1,o=n[1],l=this.questionList[a],r=null;if("single_check"===l.questionType){if(r=this.answerList[a].answerSingleCheck,o!=r)return!1}else if("multi_check"===l.questionType){r=this.answerList[a].answerMultiCheck;var u,c=Object(re["a"])(o);try{for(c.s();!(u=c.n()).done;){var d=u.value;if(-1===r.indexOf(d))return!1}}catch(p){c.e(p)}finally{c.f()}}}}catch(p){s.e(p)}finally{s.f()}return!0},checkValidate:function(){var e,t=Object(re["a"])(this.answerList);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(!0!==i.questionNullable){if(console.log("single_check"===i.questionType),"single_check"===i.questionType&&""===i.answerSingleCheck||"multi_check"===i.questionType&&i.answerMultiCheck===[]||"single_line_text"===i.questionType&&""===i.answerText||"multi_line_text"===i.questionType&&""===i.answerText||"number"===i.questionType&&null==i.answerNumber||"grade"===i.questionType&&0===i.answerGrade||"date"===i.questionType&&null==i.answerGrade)return console.log("error"),this.$message.error(i.questionId%1e3+1+" "+i.questionTitle+" 是必填字段！"),!1}else console.log("nullable",i)}}catch(s){t.e(s)}finally{t.f()}return!0}},mounted:function(){var e=this;this.fetchData(),this.ip=localStorage.getItem("Ip"),this.axios.get("/api/fillin/checkAlreadySubmit",{params:{questionnaireId:this.$route.params.id,ip:this.ip}}).then((function(t){e.alreadySubmit=t["data"],e.cannotSubmit=e.alreadySubmit,e.alreadySubmit&&e.$message.error({message:"您已填写过该问卷！",duration:0,showClose:!0})})).catch((function(){e.$message({message:"error！IP地址检测失败！",duration:1e3})}))}}),Ye=Xe,Ze=(i("2e9a"),Object(p["a"])(Ye,We,Ke,!1,null,"adf1416a",null)),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[!1===e.registerChoose?i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"loginForm",staticClass:"loginContainer",attrs:{rules:e.rules,"element-loading-text":"正在登录...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",model:e.loginForm}},[i("h3",{staticClass:"loginTitle"},[e._v("系统登录")]),i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{attrs:{size:"normal",type:"text","auto-complete":"off",placeholder:"请输入用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{size:"normal",type:"password","auto-complete":"off",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),i("el-link",{staticClass:"link",attrs:{type:"primary"},on:{click:function(t){e.registerChoose=!0}}},[e._v(" 注册账户 ")]),i("el-button",{staticStyle:{width:"100%"},attrs:{size:"normal",type:"primary"},on:{click:e.submitLogin}},[e._v("登录")])],1):e._e(),!0===e.registerChoose?i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"registerForm",staticClass:"loginContainer",attrs:{rules:e.rules,"element-loading-text":"正在注册...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",model:e.registerForm}},[i("h3",{staticClass:"loginTitle"},[e._v("注册账户")]),i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{attrs:{size:"normal",type:"text","auto-complete":"off",placeholder:"请输入用户名"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{size:"normal",type:"password","auto-complete":"off",placeholder:"请输入密码"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),i("el-link",{staticClass:"link",attrs:{type:"primary"},on:{click:function(t){e.registerChoose=!1}}},[e._v(" 登录账户 ")]),i("el-button",{staticStyle:{width:"100%"},attrs:{size:"normal",type:"primary"},on:{click:e.submitRegister}},[e._v("注册")])],1):e._e()],1)},it=[],st={name:"Login",data:function(){return{loading:!1,vcUrl:"/verifyCode?time="+new Date,loginForm:{username:"user",password:"123"},registerForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},registerChoose:!1}},methods:{submitLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.axios.post("/api/login?username="+e.loginForm.username+"&password="+e.loginForm.password).then((function(t){e.loading=!1,"wrong"===t.data?e.$message.error({message:"账户名或密码输入错误！",duration:1e3}):"success"===t.data&&(e.$message.success({message:"登录成功！",duration:1e3}),e.$router.replace("/collection"),e.$store.commit("login",e.loginForm.username))}))}))},submitRegister:function(){var e=this;this.$refs.registerForm.validate((function(t){if(!t)return!1;e.axios.post("/api/register?username="+e.loginForm.username+"&password="+e.loginForm.password).then((function(t){e.loading=!1,"usernameAlready"===t.data?e.$message.error({message:"用户名已注册！",duration:1e3}):"success"===t.data&&(e.$message.success({message:"注册成功！",duration:1e3}),e.registerChoose=!1)}))}))}}},nt=st,at=(i("d6db"),Object(p["a"])(nt,tt,it,!1,null,null,null)),ot=at.exports;s["default"].use(D["a"]);var lt=[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:ot},{path:"/collection",name:"collection",component:X},{path:"/create/:id",name:"create",component:xe},{path:"/help",name:"help",component:Oe},{path:"/analysis/:id",name:"analysis",component:Je},{path:"/fillin/:id",name:"fillin",component:et}],rt=new D["a"]({mode:"hash",base:"/",routes:lt}),ut=rt,ct=i("2f62");s["default"].use(ct["a"]);var dt=new ct["a"].Store({state:{login:!1,username:""},mutations:{login:function(e,t){e.login=!0,e.username=t},logout:function(e){e.login=!1,e.username=""}},actions:{},modules:{}});s["default"].config.productionTip=!1,s["default"].prototype.servername="http://localhost:8080",s["default"].use(L.a),V.a.defaults.baseURL="/",s["default"].use(O.a,V.a),new s["default"]({router:ut,store:dt,render:function(e){return e(k)}}).$mount("#app")},d6db:function(e,t,i){"use strict";var s=i("e67a"),n=i.n(s);n.a},d94e:function(e,t,i){"use strict";var s=i("8954"),n=i.n(s);n.a},de17:function(e,t,i){},e082:function(e,t,i){"use strict";var s=i("6664"),n=i.n(s);n.a},e67a:function(e,t,i){},f27d:function(e,t,i){},fed0:function(e,t,i){}});
//# sourceMappingURL=app.898a11a8.js.map